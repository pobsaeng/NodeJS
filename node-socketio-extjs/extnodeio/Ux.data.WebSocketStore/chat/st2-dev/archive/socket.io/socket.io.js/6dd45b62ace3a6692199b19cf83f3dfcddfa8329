/*6dd45b62ace3a6692199b19cf83f3dfcddfa8329*//*! Socket.IO.js build:0.9.6, development. Copyright(c) 2011 LearnBoost <dev@learnboost.com> MIT Licensed */
(function(e,d){var f=e;f.version="0.9.6";f.protocol=1;f.transports=[];f.j=[];f.sockets={};f.connect=function(b,j){var c=f.util.parseUri(b),a,l;if(d&&d.location){c.protocol=c.protocol||d.location.protocol.slice(0,-1);c.host=c.host||(d.document?d.document.domain:d.location.hostname);c.port=c.port||d.location.port}a=f.util.uniqueUri(c);var k={host:c.host,secure:"https"==c.protocol,port:c.port||("https"==c.protocol?443:80),query:c.query||""};f.util.merge(k,j);if(k["force new connection"]||!f.sockets[a]){l=new f.Socket(k)}if(!k["force new connection"]&&l){f.sockets[a]=l}l=l||f.sockets[a];return l.of(c.path.length>1?c.path:"")}})("object"===typeof module?module.exports:(this.io={}),this);(function(h,m){var i=h.util={};var n=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;var l=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];i.parseUri=function(a){var d=n.exec(a||""),b={},c=14;while(c--){b[l[c]]=d[c]||""}return b};i.uniqueUri=function(b){var a=b.protocol,c=b.host,d=b.port;if("document" in m){c=c||document.domain;d=d||(a=="https"&&document.location.protocol!=="https:"?443:document.location.port)}else{c=c||"localhost";if(!d&&a=="https"){d=443}}return(a||"http")+"://"+c+":"+(d||80)};i.query=function(a,e){var b=i.chunkQuery(a||""),c=[];i.merge(b,i.chunkQuery(e||""));for(var d in b){if(b.hasOwnProperty(d)){c.push(d+"="+b[d])}}return c.length?"?"+c.join("&"):""};i.chunkQuery=function(d){var f={},e=d.split("&"),b=0,c=e.length,a;for(;b<c;++b){a=e[b].split("=");if(a[0]){f[a[0]]=a[1]}}return f};var k=false;i.load=function(a){if("document" in m&&document.readyState==="complete"||k){return a()}i.on(m,"load",a,false)};i.on=function(c,a,b,d){if(c.attachEvent){c.attachEvent("on"+a,b)}else{if(c.addEventListener){c.addEventListener(a,b,d)}}};i.request=function(b){if(b&&"undefined"!=typeof XDomainRequest){return new XDomainRequest()}if("undefined"!=typeof XMLHttpRequest&&(!b||i.ua.hasCORS)){return new XMLHttpRequest()}if(!b){try{return new window[(["Active"].concat("Object").join("X"))]("Microsoft.XMLHTTP")}catch(a){}}return null};if("undefined"!=typeof window){i.load(function(){k=true})}i.defer=function(a){if(!i.ua.webkit||"undefined"!=typeof importScripts){return a()}i.load(function(){setTimeout(a,100)})};i.merge=function j(b,f,e,c){var d=c||[],a=typeof e=="undefined"?2:e,g;for(g in f){if(f.hasOwnProperty(g)&&i.indexOf(d,g)<0){if(typeof b[g]!=="object"||!a){b[g]=f[g];d.push(f[g])}else{i.merge(b[g],f[g],a-1,d)}}}return b};i.mixin=function(a,b){i.merge(a.prototype,b.prototype)};i.inherit=function(b,c){function a(){}a.prototype=c.prototype;b.prototype=new a};i.isArray=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};i.intersect=function(d,b){var a=[],f=d.length>b.length?d:b,e=d.length>b.length?b:d;for(var g=0,c=e.length;g<c;g++){if(~i.indexOf(f,e[g])){a.push(e[g])}}return a};i.indexOf=function(d,a,b){for(var c=d.length,b=b<0?b+c<0?0:b+c:b||0;b<c&&d[b]!==a;b++){}return c<=b?-1:b};i.toArray=function(a){var d=[];for(var b=0,c=a.length;b<c;b++){d.push(a[b])}return d};i.ua={};i.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&(function(){try{var b=new XMLHttpRequest()}catch(a){return false}return b.withCredentials!=undefined})();i.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent)})("undefined"!=typeof io?io:module.exports,this);(function(e,f){e.EventEmitter=d;function d(){}d.prototype.on=function(b,a){if(!this.$events){this.$events={}}if(!this.$events[b]){this.$events[b]=a}else{if(f.util.isArray(this.$events[b])){this.$events[b].push(a)}else{this.$events[b]=[this.$events[b],a]}}return this};d.prototype.addListener=d.prototype.on;d.prototype.once=function(b,a){var c=this;function h(){c.removeListener(b,h);a.apply(this,arguments)}h.listener=a;this.on(b,h);return this};d.prototype.removeListener=function(k,c){if(this.$events&&this.$events[k]){var b=this.$events[k];if(f.util.isArray(b)){var a=-1;for(var i=0,l=b.length;i<l;i++){if(b[i]===c||(b[i].listener&&b[i].listener===c)){a=i;break}}if(a<0){return this}b.splice(a,1);if(!b.length){delete this.$events[k]}}else{if(b===c||(b.listener&&b.listener===c)){delete this.$events[k]}}}return this};d.prototype.removeAllListeners=function(a){if(this.$events&&this.$events[a]){this.$events[a]=null}return this};d.prototype.listeners=function(a){if(!this.$events){this.$events={}}if(!this.$events[a]){this.$events[a]=[]}if(!f.util.isArray(this.$events[a])){this.$events[a]=[this.$events[a]]}return this.$events[a]};d.prototype.emit=function(i){if(!this.$events){return false}var a=this.$events[i];if(!a){return false}var k=Array.prototype.slice.call(arguments,1);if("function"==typeof a){a.apply(this,k)}else{if(f.util.isArray(a)){var b=a.slice();for(var c=0,l=b.length;c<l;c++){b[c].apply(this,k)}}else{return false}}return true}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(exports,nativeJSON){if(nativeJSON&&nativeJSON.parse){return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify}}var JSON=exports.JSON={};function f(n){return n<10?"0"+n:n}function date(d,key){return isFinite(d.valueOf())?d.getUTCFullYear()+"-"+f(d.getUTCMonth()+1)+"-"+f(d.getUTCDate())+"T"+f(d.getUTCHours())+":"+f(d.getUTCMinutes())+":"+f(d.getUTCSeconds())+"Z":null}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value instanceof Date){value=date(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})};JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}})("undefined"!=typeof io?io:module.exports,typeof JSON!=="undefined"?JSON:undefined);(function(o,l){var r=o.parser={};var n=r.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"];var q=r.reasons=["transport not supported","client not handshaken","unauthorized"];var p=r.advice=["reconnect"];var j=l.JSON,k=l.util.indexOf;r.encodePacket=function(h){var c=k(n,h.type),i=h.id||"",a=h.endpoint||"",t=h.ack,e=null;switch(h.type){case"error":var d=h.reason?k(q,h.reason):"",g=h.advice?k(p,h.advice):"";if(d!==""||g!==""){e=d+(g!==""?("+"+g):"")}break;case"message":if(h.data!==""){e=h.data}break;case"event":var b={name:h.name};if(h.args&&h.args.length){b.args=h.args}e=j.stringify(b);break;case"json":e=j.stringify(h.data);break;case"connect":if(h.qs){e=h.qs}break;case"ack":e=h.ackId+(h.args&&h.args.length?"+"+j.stringify(h.args):"");break}var f=[c,i+(t=="data"?"+":""),a];if(e!==null&&e!==undefined){f.push(e)}return f.join(":")};r.encodePayload=function(d){var b="";if(d.length==1){return d[0]}for(var a=0,c=d.length;a<c;a++){var e=d[a];b+="\ufffd"+e.length+"\ufffd"+d[a]}return b};var m=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;r.decodePacket=function(b){var c=b.match(m);if(!c){return{}}var e=c[2]||"",b=c[5]||"",f={type:n[c[1]],endpoint:c[4]||""};if(e){f.id=e;if(c[3]){f.ack="data"}else{f.ack=true}}switch(f.type){case"error":var c=b.split("+");f.reason=q[c[0]]||"";f.advice=p[c[1]]||"";break;case"message":f.data=b||"";break;case"event":try{var d=j.parse(b);f.name=d.name;f.args=d.args}catch(a){}f.args=f.args||[];break;case"json":try{f.data=j.parse(b)}catch(a){}break;case"connect":f.qs=b||"";break;case"ack":var c=b.match(/^([0-9]+)(\+)?(.*)/);if(c){f.ackId=c[1];f.args=[];if(c[3]){try{f.args=c[3]?j.parse(c[3]):[]}catch(a){}}}break;case"disconnect":case"heartbeat":break}return f};r.decodePayload=function(a){if(a.charAt(0)=="\ufffd"){var d=[];for(var c=1,b="";c<a.length;c++){if(a.charAt(c)=="\ufffd"){d.push(r.decodePacket(a.substr(c+1).substr(0,b)));c+=Number(b)+1;b=""}else{b+=a.charAt(c)}}return d}else{return[r.decodePacket(a)]}}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(e,f){e.Transport=d;function d(b,a){this.socket=b;this.sessid=a}f.util.mixin(d,f.EventEmitter);d.prototype.onData=function(a){this.clearCloseTimeout();if(this.socket.connected||this.socket.connecting||this.socket.reconnecting){this.setCloseTimeout()}if(a!==""){var b=f.parser.decodePayload(a);if(b&&b.length){for(var c=0,h=b.length;c<h;c++){this.onPacket(b[c])}}}return this};d.prototype.onPacket=function(a){this.socket.setHeartbeatTimeout();if(a.type=="heartbeat"){return this.onHeartbeat()}if(a.type=="connect"&&a.endpoint==""){this.onConnect()}if(a.type=="error"&&a.advice=="reconnect"){this.open=false}this.socket.onPacket(a);return this};d.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var a=this;this.closeTimeout=setTimeout(function(){a.onDisconnect()},this.socket.closeTimeout)}};d.prototype.onDisconnect=function(){if(this.close&&this.open){this.close()}this.clearTimeouts();this.socket.onDisconnect();return this};d.prototype.onConnect=function(){this.socket.onConnect();return this};d.prototype.clearCloseTimeout=function(){if(this.closeTimeout){clearTimeout(this.closeTimeout);this.closeTimeout=null}};d.prototype.clearTimeouts=function(){this.clearCloseTimeout();if(this.reopenTimeout){clearTimeout(this.reopenTimeout)}};d.prototype.packet=function(a){this.send(f.parser.encodePacket(a))};d.prototype.onHeartbeat=function(a){this.packet({type:"heartbeat"})};d.prototype.onOpen=function(){this.open=true;this.clearCloseTimeout();this.socket.onOpen()};d.prototype.onClose=function(){var a=this;this.open=false;this.socket.onClose();this.onDisconnect()};d.prototype.prepareUrl=function(){var a=this.socket.options;return this.scheme()+"://"+a.host+":"+a.port+"/"+a.resource+"/"+f.protocol+"/"+this.name+"/"+this.sessid};d.prototype.ready=function(b,a){a.call(this)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(f,h,j){f.Socket=g;function g(a){this.options={port:80,secure:false,document:"document" in j?document:false,resource:"socket.io",transports:h.transports,"connect timeout":10000,"try multiple transports":true,reconnect:true,"reconnection delay":500,"reconnection limit":Infinity,"reopen delay":3000,"max reconnection attempts":10,"sync disconnect on unload":true,"auto connect":true,"flash policy port":10843};h.util.merge(this.options,a);this.connected=false;this.open=false;this.connecting=false;this.reconnecting=false;this.namespaces={};this.buffer=[];this.doBuffer=false;if(this.options["sync disconnect on unload"]&&(!this.isXDomain()||h.util.ua.hasCORS)){var b=this;h.util.on(j,"unload",function(){b.disconnectSync()},false)}if(this.options["auto connect"]){this.connect()}}h.util.mixin(g,h.EventEmitter);g.prototype.of=function(a){if(!this.namespaces[a]){this.namespaces[a]=new h.SocketNamespace(this,a);if(a!==""){this.namespaces[a].packet({type:"connect"})}}return this.namespaces[a]};g.prototype.publish=function(){this.emit.apply(this,arguments);var a;for(var b in this.namespaces){if(this.namespaces.hasOwnProperty(b)){a=this.of(b);a.$emit.apply(a,arguments)}}};function i(){}g.prototype.handshake=function(b){var n=this,d=this.options;function p(k){if(k instanceof Error){n.onError(k.message)}else{b.apply(null,k.split(":"))}}var e=["http"+(d.secure?"s":"")+":/",d.host+":"+d.port,d.resource,h.protocol,h.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!h.util.ua.hasCORS){var c=document.getElementsByTagName("script")[0],o=document.createElement("script");o.src=e+"&jsonp="+h.j.length;c.parentNode.insertBefore(o,c);h.j.push(function(k){p(k);o.parentNode.removeChild(o)})}else{var a=h.util.request();a.open("GET",e,true);a.withCredentials=true;a.onreadystatechange=function(){if(a.readyState==4){a.onreadystatechange=i;if(a.status==200){p(a.responseText)}else{!n.reconnecting&&n.onError(a.responseText)}}};a.send(null)}};g.prototype.getTransport=function(b){var e=b||this.transports,d;for(var c=0,a;a=e[c];c++){if(h.Transport[a]&&h.Transport[a].check(this)&&(!this.isXDomain()||h.Transport[a].xdomainCheck())){return new h.Transport[a](this,this.sessionid)}}return null};g.prototype.connect=function(a){if(this.connecting){return this}var b=this;this.handshake(function(n,d,c,e){b.sessionid=n;b.closeTimeout=c*1000;b.heartbeatTimeout=d*1000;b.transports=e?h.util.intersect(e.split(","),b.options.transports):b.options.transports;b.setHeartbeatTimeout();function m(k){if(b.transport){b.transport.clearTimeouts()}b.transport=b.getTransport(k);if(!b.transport){return b.publish("connect_failed")}b.transport.ready(b,function(){b.connecting=true;b.publish("connecting",b.transport.name);b.transport.open();if(b.options["connect timeout"]){b.connectTimeoutTimer=setTimeout(function(){if(!b.connected){b.connecting=false;if(b.options["try multiple transports"]){if(!b.remainingTransports){b.remainingTransports=b.transports.slice(0)}var l=b.remainingTransports;while(l.length>0&&l.splice(0,1)[0]!=b.transport.name){}if(l.length){m(l)}else{b.publish("connect_failed")}}}},b.options["connect timeout"])}})}m(b.transports);b.once("connect",function(){clearTimeout(b.connectTimeoutTimer);a&&typeof a=="function"&&a()})});return this};g.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);var a=this;this.heartbeatTimeoutTimer=setTimeout(function(){a.transport.onClose()},this.heartbeatTimeout)};g.prototype.packet=function(a){if(this.connected&&!this.doBuffer){this.transport.packet(a)}else{this.buffer.push(a)}return this};g.prototype.setBuffer=function(a){this.doBuffer=a;if(!a&&this.connected&&this.buffer.length){this.transport.payload(this.buffer);this.buffer=[]}};g.prototype.disconnect=function(){if(this.connected||this.connecting){if(this.open){this.of("").packet({type:"disconnect"})}this.onDisconnect("booted")}return this};g.prototype.disconnectSync=function(){var a=h.util.request(),b=this.resource+"/"+h.protocol+"/"+this.sessionid;a.open("GET",b,true);this.onDisconnect("booted")};g.prototype.isXDomain=function(){var a=j.location.port||("https:"==j.location.protocol?443:80);return this.options.host!==j.location.hostname||this.options.port!=a};g.prototype.onConnect=function(){if(!this.connected){this.connected=true;this.connecting=false;if(!this.doBuffer){this.setBuffer(false)}this.emit("connect")}};g.prototype.onOpen=function(){this.open=true};g.prototype.onClose=function(){this.open=false;clearTimeout(this.heartbeatTimeoutTimer)};g.prototype.onPacket=function(a){this.of(a.endpoint).onPacket(a)};g.prototype.onError=function(a){if(a&&a.advice){if(a.advice==="reconnect"&&(this.connected||this.connecting)){this.disconnect();if(this.options.reconnect){this.reconnect()}}}this.publish("error",a&&a.reason?a.reason:a)};g.prototype.onDisconnect=function(a){var b=this.connected,c=this.connecting;this.connected=false;this.connecting=false;this.open=false;if(b||c){this.transport.close();this.transport.clearTimeouts();if(b){this.publish("disconnect",a);if("booted"!=a&&this.options.reconnect&&!this.reconnecting){this.reconnect()}}}};g.prototype.reconnect=function(){this.reconnecting=true;this.reconnectionAttempts=0;this.reconnectionDelay=this.options["reconnection delay"];var c=this,d=this.options["max reconnection attempts"],l=this.options["try multiple transports"],e=this.options["reconnection limit"];function b(){if(c.connected){for(var k in c.namespaces){if(c.namespaces.hasOwnProperty(k)&&""!==k){c.namespaces[k].packet({type:"connect"})}}c.publish("reconnect",c.transport.name,c.reconnectionAttempts)}clearTimeout(c.reconnectionTimer);c.removeListener("connect_failed",a);c.removeListener("connect",a);c.reconnecting=false;delete c.reconnectionAttempts;delete c.reconnectionDelay;delete c.reconnectionTimer;delete c.redoTransports;c.options["try multiple transports"]=l}function a(){if(!c.reconnecting){return}if(c.connected){return b()}if(c.connecting&&c.reconnecting){return c.reconnectionTimer=setTimeout(a,1000)}if(c.reconnectionAttempts++>=d){if(!c.redoTransports){c.on("connect_failed",a);c.options["try multiple transports"]=true;c.transport=c.getTransport();c.redoTransports=true;c.connect()}else{c.publish("reconnect_failed");b()}}else{if(c.reconnectionDelay<e){c.reconnectionDelay*=2}c.connect();c.publish("reconnecting",c.reconnectionDelay,c.reconnectionAttempts);c.reconnectionTimer=setTimeout(a,c.reconnectionDelay)}}this.options["try multiple transports"]=false;this.reconnectionTimer=setTimeout(a,this.reconnectionDelay);this.on("connect",a)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(f,g){f.SocketNamespace=e;function e(b,a){this.socket=b;this.name=a||"";this.flags={};this.json=new h(this,"json");this.ackPackets=0;this.acks={}}g.util.mixin(e,g.EventEmitter);e.prototype.$emit=g.EventEmitter.prototype.emit;e.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)};e.prototype.packet=function(a){a.endpoint=this.name;this.socket.packet(a);this.flags={};return this};e.prototype.send=function(b,c){var a={type:this.flags.json?"json":"message",data:b};if("function"==typeof c){a.id=++this.ackPackets;a.ack=true;this.acks[a.id]=c}return this.packet(a)};e.prototype.emit=function(c){var d=Array.prototype.slice.call(arguments,1),a=d[d.length-1],b={type:"event",name:c};if("function"==typeof a){b.id=++this.ackPackets;b.ack="data";this.acks[b.id]=a;d=d.slice(0,d.length-1)}b.args=d;return this.packet(b)};e.prototype.disconnect=function(){if(this.name===""){this.socket.disconnect()}else{this.packet({type:"disconnect"});this.$emit("disconnect")}return this};e.prototype.onPacket=function(c){var d=this;function a(){d.packet({type:"ack",args:g.util.toArray(arguments),ackId:c.id})}switch(c.type){case"connect":this.$emit("connect");break;case"disconnect":if(this.name===""){this.socket.onDisconnect(c.reason||"booted")}else{this.$emit("disconnect",c.reason)}break;case"message":case"json":var b=["message",c.data];if(c.ack=="data"){b.push(a)}else{if(c.ack){this.packet({type:"ack",ackId:c.id})}}this.$emit.apply(this,b);break;case"event":var b=[c.name].concat(c.args);if(c.ack=="data"){b.push(a)}this.$emit.apply(this,b);break;case"ack":if(this.acks[c.ackId]){this.acks[c.ackId].apply(this,c.args);delete this.acks[c.ackId]}break;case"error":if(c.advice){this.socket.onError(c)}else{if(c.reason=="unauthorized"){this.$emit("connect_failed",c.reason)}else{this.$emit("error",c.reason)}}break}};function h(a,b){this.namespace=a;this.name=b}h.prototype.send=function(){this.namespace.flags[this.name]=true;this.namespace.send.apply(this.namespace,arguments)};h.prototype.emit=function(){this.namespace.flags[this.name]=true;this.namespace.emit.apply(this.namespace,arguments)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(e,g,h){e.websocket=f;function f(a){g.Transport.apply(this,arguments)}g.util.inherit(f,g.Transport);f.prototype.name="websocket";f.prototype.open=function(){var a=g.util.query(this.socket.options.query),b=this,c;if(!c){c=h.MozWebSocket||h.WebSocket}this.websocket=new c(this.prepareUrl()+a);this.websocket.onopen=function(){b.onOpen();b.socket.setBuffer(false)};this.websocket.onmessage=function(d){b.onData(d.data)};this.websocket.onclose=function(){b.onClose();b.socket.setBuffer(true)};this.websocket.onerror=function(d){b.onError(d)};return this};f.prototype.send=function(a){this.websocket.send(a);return this};f.prototype.payload=function(c){for(var a=0,b=c.length;a<b;a++){this.packet(c[a])}return this};f.prototype.close=function(){this.websocket.close();return this};f.prototype.onError=function(a){this.socket.onError(a)};f.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"};f.check=function(){return("WebSocket" in h&&!("__addTask" in WebSocket))||"MozWebSocket" in h};f.xdomainCheck=function(){return true};g.transports.push("websocket")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(d,f){d.flashsocket=e;function e(){f.Transport.websocket.apply(this,arguments)}f.util.inherit(e,f.Transport.websocket);e.prototype.name="flashsocket";e.prototype.open=function(){var b=this,a=arguments;WebSocket.__addTask(function(){f.Transport.websocket.prototype.open.apply(b,a)});return this};e.prototype.send=function(){var b=this,a=arguments;WebSocket.__addTask(function(){f.Transport.websocket.prototype.send.apply(b,a)});return this};e.prototype.close=function(){WebSocket.__tasks.length=0;f.Transport.websocket.prototype.close.call(this);return this};e.prototype.ready=function(h,b){function a(){var k=h.options,l=k["flash policy port"],g=["http"+(k.secure?"s":"")+":/",k.host+":"+k.port,k.resource,"static/flashsocket","WebSocketMain"+(h.isXDomain()?"Insecure":"")+".swf"];if(!e.loaded){if(typeof WEB_SOCKET_SWF_LOCATION==="undefined"){WEB_SOCKET_SWF_LOCATION=g.join("/")}if(l!==843){WebSocket.loadFlashPolicyFile("xmlsocket://"+k.host+":"+l)}WebSocket.__initialize();e.loaded=true}b.call(c)}var c=this;if(document.body){return a()}f.util.load(a)};e.check=function(){if(typeof WebSocket=="undefined"||!("__initialize" in WebSocket)||!swfobject){return false}return swfobject.getFlashPlayerVersion().major>=10};e.xdomainCheck=function(){return true};if(typeof window!="undefined"){WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=true}f.transports.push("flashsocket")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);if("undefined"!=typeof window){var swfobject=function(){var l="undefined",T="object",A="Shockwave Flash",e="ShockwaveFlash.ShockwaveFlash",S="application/x-shockwave-flash",z="SWFObjectExprInst",f="onreadystatechange",w=window,L=document,V=navigator,B=false,a=[J],Q=[],v=[],q=[],N,y,m,j,r=false,C=false,P,o,O=true,u=function(){var ah=typeof L.getElementById!=l&&typeof L.getElementsByTagName!=l&&typeof L.createElement!=l,ad=V.userAgent.toLowerCase(),af=V.platform.toLowerCase(),aa=af?/win/.test(af):/win/.test(ad),Y=af?/mac/.test(af):/mac/.test(ad),ab=/webkit/.test(ad)?parseFloat(ad.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ae=!+"\v1",ac=[0,0,0],X=null;if(typeof V.plugins!=l&&typeof V.plugins[A]==T){X=V.plugins[A].description;if(X&&!(typeof V.mimeTypes!=l&&V.mimeTypes[S]&&!V.mimeTypes[S].enabledPlugin)){B=true;ae=false;X=X.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ac[0]=parseInt(X.replace(/^(.*)\..*$/,"$1"),10);ac[1]=parseInt(X.replace(/^.*\.(.*)\s.*$/,"$1"),10);ac[2]=/[a-zA-Z]/.test(X)?parseInt(X.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof w[(["Active"].concat("Object").join("X"))]!=l){try{var Z=new window[(["Active"].concat("Object").join("X"))](e);if(Z){X=Z.GetVariable("$version");if(X){ae=true;X=X.split(" ")[1].split(",");ac=[parseInt(X[0],10),parseInt(X[1],10),parseInt(X[2],10)]}}}catch(ag){}}}return{w3:ah,pv:ac,wk:ab,ie:ae,win:aa,mac:Y}}(),M=function(){if(!u.w3){return}if((typeof L.readyState!=l&&L.readyState=="complete")||(typeof L.readyState==l&&(L.getElementsByTagName("body")[0]||L.body))){H()}if(!r){if(typeof L.addEventListener!=l){L.addEventListener("DOMContentLoaded",H,false)}if(u.ie&&u.win){L.attachEvent(f,function(){if(L.readyState=="complete"){L.detachEvent(f,arguments.callee);H()}});if(w==top){(function(){if(r){return}try{L.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}H()})()}}if(u.wk){(function(){if(r){return}if(!/loaded|complete/.test(L.readyState)){setTimeout(arguments.callee,0);return}H()})()}U(H)}}();function H(){if(r){return}try{var X=L.getElementsByTagName("body")[0].appendChild(k("span"));X.parentNode.removeChild(X)}catch(Y){return}r=true;var Z=a.length;for(var aa=0;aa<Z;aa++){a[aa]()}}function s(X){if(r){X()}else{a[a.length]=X}}function U(Y){if(typeof w.addEventListener!=l){w.addEventListener("load",Y,false)}else{if(typeof L.addEventListener!=l){L.addEventListener("load",Y,false)}else{if(typeof w.attachEvent!=l){K(w,"onload",Y)}else{if(typeof w.onload=="function"){var X=w.onload;w.onload=function(){X();Y()}}else{w.onload=Y}}}}}function J(){if(B){c()}else{p()}}function c(){var Z=L.getElementsByTagName("body")[0];var X=k(T);X.setAttribute("type",S);var Y=Z.appendChild(X);if(Y){var aa=0;(function(){if(typeof Y.GetVariable!=l){var ab=Y.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");u.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(aa<10){aa++;setTimeout(arguments.callee,10);return}}Z.removeChild(X);Y=null;p()})()}else{p()}}function p(){var ac=Q.length;if(ac>0){for(var ab=0;ab<ac;ab++){var ag=Q[ab].id;var X=Q[ab].callbackFn;var ai={success:false,id:ag};if(u.pv[0]>0){var aa=E(ag);if(aa){if(n(Q[ab].swfVersion)&&!(u.wk&&u.wk<312)){d(ag,true);if(X){ai.success=true;ai.ref=h(ag);X(ai)}}else{if(Q[ab].expressInstall&&i()){var ae={};ae.data=Q[ab].expressInstall;ae.width=aa.getAttribute("width")||"0";ae.height=aa.getAttribute("height")||"0";if(aa.getAttribute("class")){ae.styleclass=aa.getAttribute("class")}if(aa.getAttribute("align")){ae.align=aa.getAttribute("align")}var ad={};var af=aa.getElementsByTagName("param");var Y=af.length;for(var Z=0;Z<Y;Z++){if(af[Z].getAttribute("name").toLowerCase()!="movie"){ad[af[Z].getAttribute("name")]=af[Z].getAttribute("value")}}x(ae,ad,ag,X)}else{R(aa);if(X){X(ai)}}}}}else{d(ag,true);if(X){var ah=h(ag);if(ah&&typeof ah.SetVariable!=l){ai.success=true;ai.ref=ah}X(ai)}}}}}function h(X){var Z=null;var aa=E(X);if(aa&&aa.nodeName=="OBJECT"){if(typeof aa.SetVariable!=l){Z=aa}else{var Y=aa.getElementsByTagName(T)[0];if(Y){Z=Y}}}return Z}function i(){return !C&&n("6.0.65")&&(u.win||u.mac)&&!(u.wk&&u.wk<312)}function x(ab,ad,Z,ac){C=true;m=ac||null;j={success:false,id:Z};var Y=E(Z);if(Y){if(Y.nodeName=="OBJECT"){N=I(Y);y=null}else{N=Y;y=Z}ab.id=z;if(typeof ab.width==l||(!/%$/.test(ab.width)&&parseInt(ab.width,10)<310)){ab.width="310"}if(typeof ab.height==l||(!/%$/.test(ab.height)&&parseInt(ab.height,10)<137)){ab.height="137"}L.title=L.title.slice(0,47)+" - Flash Player Installation";var X=u.ie&&u.win?(["Active"].concat("").join("X")):"PlugIn",ae="MMredirectURL="+w.location.toString().replace(/&/g,"%26")+"&MMplayerType="+X+"&MMdoctitle="+L.title;if(typeof ad.flashvars!=l){ad.flashvars+="&"+ae}else{ad.flashvars=ae}if(u.ie&&u.win&&Y.readyState!=4){var aa=k("div");Z+="SWFObjectNew";aa.setAttribute("id",Z);Y.parentNode.insertBefore(aa,Y);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}W(ab,ad,Z)}}function R(Y){if(u.ie&&u.win&&Y.readyState!=4){var X=k("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(I(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(I(Y),Y)}}function I(X){var ab=k("div");if(u.win&&u.ie){ab.innerHTML=X.innerHTML}else{var aa=X.getElementsByTagName(T)[0];if(aa){var Y=aa.childNodes;if(Y){var Z=Y.length;for(var ac=0;ac<Z;ac++){if(!(Y[ac].nodeType==1&&Y[ac].nodeName=="PARAM")&&!(Y[ac].nodeType==8)){ab.appendChild(Y[ac].cloneNode(true))}}}}}return ab}function W(ae,ac,ag){var af,ai=E(ag);if(u.wk&&u.wk<312){return af}if(ai){if(typeof ae.id==l){ae.id=ag}if(u.ie&&u.win){var ad="";for(var aa in ae){if(ae[aa]!=Object.prototype[aa]){if(aa.toLowerCase()=="data"){ac.movie=ae[aa]}else{if(aa.toLowerCase()=="styleclass"){ad+=' class="'+ae[aa]+'"'}else{if(aa.toLowerCase()!="classid"){ad+=" "+aa+'="'+ae[aa]+'"'}}}}}var ab="";for(var Z in ac){if(ac[Z]!=Object.prototype[Z]){ab+='<param name="'+Z+'" value="'+ac[Z]+'" />'}}ai.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ad+">"+ab+"</object>";v[v.length]=ae.id;af=E(ae.id)}else{var ah=k(T);ah.setAttribute("type",S);for(var Y in ae){if(ae[Y]!=Object.prototype[Y]){if(Y.toLowerCase()=="styleclass"){ah.setAttribute("class",ae[Y])}else{if(Y.toLowerCase()!="classid"){ah.setAttribute(Y,ae[Y])}}}}for(var X in ac){if(ac[X]!=Object.prototype[X]&&X.toLowerCase()!="movie"){G(ah,X,ac[X])}}ai.parentNode.replaceChild(ah,ai);af=ah}}return af}function G(X,Z,aa){var Y=k("param");Y.setAttribute("name",Z);Y.setAttribute("value",aa);X.appendChild(Y)}function g(Y){var X=E(Y);if(X&&X.nodeName=="OBJECT"){if(u.ie&&u.win){X.style.display="none";(function(){if(X.readyState==4){D(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function D(Y){var X=E(Y);if(X){for(var Z in X){if(typeof X[Z]=="function"){X[Z]=null}}X.parentNode.removeChild(X)}}function E(Y){var Z=null;try{Z=L.getElementById(Y)}catch(X){}return Z}function k(X){return L.createElement(X)}function K(Y,Z,X){Y.attachEvent(Z,X);q[q.length]=[Y,Z,X]}function n(Y){var X=u.pv,Z=Y.split(".");Z[0]=parseInt(Z[0],10);Z[1]=parseInt(Z[1],10)||0;Z[2]=parseInt(Z[2],10)||0;return(X[0]>Z[0]||(X[0]==Z[0]&&X[1]>Z[1])||(X[0]==Z[0]&&X[1]==Z[1]&&X[2]>=Z[2]))?true:false}function b(X,aa,Y,ad){if(u.ie&&u.mac){return}var ab=L.getElementsByTagName("head")[0];if(!ab){return}var Z=(Y&&typeof Y=="string")?Y:"screen";if(ad){P=null;o=null}if(!P||o!=Z){var ac=k("style");ac.setAttribute("type","text/css");ac.setAttribute("media",Z);P=ab.appendChild(ac);if(u.ie&&u.win&&typeof L.styleSheets!=l&&L.styleSheets.length>0){P=L.styleSheets[L.styleSheets.length-1]}o=Z}if(u.ie&&u.win){if(P&&typeof P.addRule==T){P.addRule(X,aa)}}else{if(P&&typeof L.createTextNode!=l){P.appendChild(L.createTextNode(X+" {"+aa+"}"))}}}function d(Y,Z){if(!O){return}var X=Z?"visible":"hidden";if(r&&E(Y)){E(Y).style.visibility=X}else{b("#"+Y,"visibility:"+X)}}function t(X){var Y=/[\\\"<>\.;]/;var Z=Y.exec(X)!=null;return Z&&typeof encodeURIComponent!=l?encodeURIComponent(X):X}var F=function(){if(u.ie&&u.win){window.attachEvent("onunload",function(){var Y=q.length;for(var X=0;X<Y;X++){q[X][0].detachEvent(q[X][1],q[X][2])}var ab=v.length;for(var ac=0;ac<ab;ac++){g(v[ac])}for(var aa in u){u[aa]=null}u=null;for(var Z in swfobject){swfobject[Z]=null}swfobject=null})}}();return{registerObject:function(Y,Z,ab,X){if(u.w3&&Y&&Z){var aa={};aa.id=Y;aa.swfVersion=Z;aa.expressInstall=ab;aa.callbackFn=X;Q[Q.length]=aa;d(Y,false)}else{if(X){X({success:false,id:Y})}}},getObjectById:function(X){if(u.w3){return h(X)}},embedSWF:function(X,ad,aa,ac,af,ah,ag,Z,ab,Y){var ae={success:false,id:ad};if(u.w3&&!(u.wk&&u.wk<312)&&X&&ad&&aa&&ac&&af){d(ad,false);s(function(){aa+="";ac+="";var ak={};if(ab&&typeof ab===T){for(var am in ab){ak[am]=ab[am]}}ak.data=X;ak.width=aa;ak.height=ac;var an={};if(Z&&typeof Z===T){for(var al in Z){an[al]=Z[al]}}if(ag&&typeof ag===T){for(var aj in ag){if(typeof an.flashvars!=l){an.flashvars+="&"+aj+"="+ag[aj]}else{an.flashvars=aj+"="+ag[aj]}}}if(n(af)){var ai=W(ak,an,ad);if(ak.id==ad){d(ad,true)}ae.success=true;ae.ref=ai}else{if(ah&&i()){ak.data=ah;x(ak,an,ad,Y);return}else{d(ad,true)}}if(Y){Y(ae)}})}else{if(Y){Y(ae)}}},switchOffAutoHideShow:function(){O=false},ua:u,getFlashPlayerVersion:function(){return{major:u.pv[0],minor:u.pv[1],release:u.pv[2]}},hasFlashPlayerVersion:n,createSWF:function(Y,X,Z){if(u.w3){return W(Y,X,Z)}else{return undefined}},showExpressInstall:function(X,Y,Z,aa){if(u.w3&&i()){x(X,Y,Z,aa)}},removeSWF:function(X){if(u.w3){g(X)}},createCSS:function(X,Y,aa,Z){if(u.w3){b(X,Y,aa,Z)}},addDomLoadEvent:s,addLoadEvent:U,getQueryParamValue:function(X){var Y=L.location.search||L.location.hash;if(Y){if(/\?/.test(Y)){Y=Y.split("?")[1]}if(X==null){return t(Y)}var aa=Y.split("&");for(var Z=0;Z<aa.length;Z++){if(aa[Z].substring(0,aa[Z].indexOf("="))==X){return t(aa[Z].substring((aa[Z].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(C){var X=E(z);if(X&&N){X.parentNode.replaceChild(N,X);if(y){d(y,true);if(u.ie&&u.win){N.style.display="block"}}if(m){m(j)}}C=false}}}}()}(function(){if("undefined"==typeof window||window.WebSocket){return}var b=window.console;if(!b||!b.log||!b.error){b={log:function(){},error:function(){}}}if(!swfobject.hasFlashPlayerVersion("10.0.0")){b.error("Flash Player >= 10.0.0 is required.");return}if(location.protocol=="file:"){b.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://...")}WebSocket=function(k,j,l,h,i){var a=this;a.__id=WebSocket.__nextId++;WebSocket.__instances[a.__id]=a;a.readyState=WebSocket.CONNECTING;a.bufferedAmount=0;a.__events={};if(!j){j=[]}else{if(typeof j=="string"){j=[j]}}setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(a.__id,k,j,l||null,h||0,i||null)})},0)};WebSocket.prototype.send=function(d){if(this.readyState==WebSocket.CONNECTING){throw"INVALID_STATE_ERR: Web Socket connection has not been established"}var a=WebSocket.__flash.send(this.__id,encodeURIComponent(d));if(a<0){return true}else{this.bufferedAmount+=a;return false}};WebSocket.prototype.close=function(){if(this.readyState==WebSocket.CLOSED||this.readyState==WebSocket.CLOSING){return}this.readyState=WebSocket.CLOSING;WebSocket.__flash.close(this.__id)};WebSocket.prototype.addEventListener=function(f,e,a){if(!(f in this.__events)){this.__events[f]=[]}this.__events[f].push(e)};WebSocket.prototype.removeEventListener=function(h,g,a){if(!(h in this.__events)){return}var i=this.__events[h];for(var j=i.length-1;j>=0;--j){if(i[j]===g){i.splice(j,1);break}}};WebSocket.prototype.dispatchEvent=function(f){var h=this.__events[f.type]||[];for(var a=0;a<h.length;++a){h[a](f)}var g=this["on"+f.type];if(g){g(f)}};WebSocket.prototype.__handleEvent=function(e){if("readyState" in e){this.readyState=e.readyState}if("protocol" in e){this.protocol=e.protocol}var a;if(e.type=="open"||e.type=="error"){a=this.__createSimpleEvent(e.type)}else{if(e.type=="close"){a=this.__createSimpleEvent("close")}else{if(e.type=="message"){var f=decodeURIComponent(e.message);a=this.__createMessageEvent("message",f)}else{throw"unknown event type: "+e.type}}}this.dispatchEvent(a)};WebSocket.prototype.__createSimpleEvent=function(a){if(document.createEvent&&window.Event){var d=document.createEvent("Event");d.initEvent(a,false,false);return d}else{return{type:a,bubbles:false,cancelable:false}}};WebSocket.prototype.__createMessageEvent=function(a,e){if(document.createEvent&&window.MessageEvent&&!window.opera){var f=document.createEvent("MessageEvent");f.initMessageEvent("message",false,false,e,null,null,window,null);return f}else{return{type:a,data:e,bubbles:false,cancelable:false}}};WebSocket.CONNECTING=0;WebSocket.OPEN=1;WebSocket.CLOSING=2;WebSocket.CLOSED=3;WebSocket.__flash=null;WebSocket.__instances={};WebSocket.__tasks=[];WebSocket.__nextId=0;WebSocket.loadFlashPolicyFile=function(a){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(a)})};WebSocket.__initialize=function(){if(WebSocket.__flash){return}if(WebSocket.__swfLocation){window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation}if(!window.WEB_SOCKET_SWF_LOCATION){b.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");return}var a=document.createElement("div");a.id="webSocketContainer";a.style.position="absolute";if(WebSocket.__isFlashLite()){a.style.left="0px";a.style.top="0px"}else{a.style.left="-100px";a.style.top="-100px"}var d=document.createElement("div");d.id="webSocketFlash";a.appendChild(d);document.body.appendChild(a);swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:true,swliveconnect:true,allowScriptAccess:"always"},null,function(c){if(!c.success){b.error("[WebSocket] swfobject.embedSWF failed")}})};WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash");WebSocket.__flash.setCallerUrl(location.href);WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var a=0;a<WebSocket.__tasks.length;++a){WebSocket.__tasks[a]()}WebSocket.__tasks=[]},0)};WebSocket.__onFlashEvent=function(){setTimeout(function(){try{var f=WebSocket.__flash.receiveEvents();for(var a=0;a<f.length;++a){WebSocket.__instances[f[a].webSocketId].__handleEvent(f[a])}}catch(e){b.error(e)}},0);return true};WebSocket.__log=function(a){b.log(decodeURIComponent(a))};WebSocket.__error=function(a){b.error(decodeURIComponent(a))};WebSocket.__addTask=function(a){if(WebSocket.__flash){a()}else{WebSocket.__tasks.push(a)}};WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes){return false}var a=window.navigator.mimeTypes["application/x-shockwave-flash"];if(!a||!a.enabledPlugin||!a.enabledPlugin.filename){return false}return a.enabledPlugin.filename.match(/flashlite/i)?true:false};if(!window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION){if(window.addEventListener){window.addEventListener("load",function(){WebSocket.__initialize()},false)}else{window.attachEvent("onload",function(){WebSocket.__initialize()})}}})();(function(g,h,j){g.XHR=f;function f(a){if(!a){return}h.Transport.apply(this,arguments);this.sendBuffer=[]}h.util.inherit(f,h.Transport);f.prototype.open=function(){this.socket.setBuffer(false);this.onOpen();this.get();this.setCloseTimeout();return this};f.prototype.payload=function(a){var b=[];for(var c=0,d=a.length;c<d;c++){b.push(h.parser.encodePacket(a[c]))}this.send(h.parser.encodePayload(b))};f.prototype.send=function(a){this.post(a);return this};function i(){}f.prototype.post=function(b){var c=this;this.socket.setBuffer(true);function d(){if(this.readyState==4){this.onreadystatechange=i;c.posting=false;if(this.status==200){c.socket.setBuffer(false)}else{c.onClose()}}}function a(){this.onload=i;c.socket.setBuffer(false)}this.sendXHR=this.request("POST");if(j.XDomainRequest&&this.sendXHR instanceof XDomainRequest){this.sendXHR.onload=this.sendXHR.onerror=a}else{this.sendXHR.onreadystatechange=d}this.sendXHR.send(b)};f.prototype.close=function(){this.onClose();return this};f.prototype.request=function(a){var d=h.util.request(this.socket.isXDomain()),c=h.util.query(this.socket.options.query,"t="+ +new Date);d.open(a||"GET",this.prepareUrl()+c,true);if(a=="POST"){try{if(d.setRequestHeader){d.setRequestHeader("Content-type","text/plain;charset=UTF-8")}else{d.contentType="text/plain"}}catch(b){}}return d};f.prototype.scheme=function(){return this.socket.options.secure?"https":"http"};f.check=function(n,e){try{var c=h.util.request(e),m=(j.XDomainRequest&&c instanceof XDomainRequest),d=(n&&n.options&&n.options.secure?"https:":"http:"),a=(d!=j.location.protocol);if(c&&!(m&&a)){return true}}catch(b){}return false};f.xdomainCheck=function(){return f.check(null,true)}})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(e,f){e.htmlfile=d;function d(a){f.Transport.XHR.apply(this,arguments)}f.util.inherit(d,f.Transport.XHR);d.prototype.name="htmlfile";d.prototype.get=function(){this.doc=new window[(["Active"].concat("Object").join("X"))]("htmlfile");this.doc.open();this.doc.write("<html></html>");this.doc.close();this.doc.parentWindow.s=this;var c=this.doc.createElement("div");c.className="socketio";this.doc.body.appendChild(c);this.iframe=this.doc.createElement("iframe");c.appendChild(this.iframe);var b=this,a=f.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+a;f.util.on(window,"unload",function(){b.destroy()})};d.prototype._=function(c,a){this.onData(c);try{var i=a.getElementsByTagName("script")[0];i.parentNode.removeChild(i)}catch(b){}};d.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(a){}this.doc=null;this.iframe.parentNode.removeChild(this.iframe);this.iframe=null;CollectGarbage()}};d.prototype.close=function(){this.destroy();return f.Transport.XHR.prototype.close.call(this)};d.check=function(){if(typeof window!="undefined"&&(["Active"].concat("Object").join("X")) in window){try{var b=new window[(["Active"].concat("Object").join("X"))]("htmlfile");return b&&f.Transport.XHR.check()}catch(a){}}return false};d.xdomainCheck=function(){return false};f.transports.push("htmlfile")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(g,h,f){g["xhr-polling"]=i;function i(){h.Transport.XHR.apply(this,arguments)}h.util.inherit(i,h.Transport.XHR);h.util.merge(i,h.Transport.XHR);i.prototype.name="xhr-polling";i.prototype.open=function(){var a=this;h.Transport.XHR.prototype.open.call(a);return false};function j(){}i.prototype.get=function(){if(!this.open){return}var b=this;function c(){if(this.readyState==4){this.onreadystatechange=j;if(this.status==200){b.onData(this.responseText);b.get()}else{b.onClose()}}}function a(){this.onload=j;this.onerror=j;b.onData(this.responseText);b.get()}function d(){b.onClose()}this.xhr=this.request();if(f.XDomainRequest&&this.xhr instanceof XDomainRequest){this.xhr.onload=a;this.xhr.onerror=d}else{this.xhr.onreadystatechange=c}this.xhr.send(null)};i.prototype.onClose=function(){h.Transport.XHR.prototype.onClose.call(this);if(this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=j;try{this.xhr.abort()}catch(a){}this.xhr=null}};i.prototype.ready=function(c,a){var b=this;h.util.defer(function(){a.call(b)})};h.transports.push("xhr-polling")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(f,h,i){var g=i.document&&"MozAppearance" in i.document.documentElement.style;f["jsonp-polling"]=j;function j(b){h.Transport["xhr-polling"].apply(this,arguments);this.index=h.j.length;var a=this;h.j.push(function(c){a._(c)})}h.util.inherit(j,h.Transport["xhr-polling"]);j.prototype.name="jsonp-polling";j.prototype.post=function(d){var a=this,b=h.util.query(this.socket.options.query,"t="+(+new Date)+"&i="+this.index);if(!this.form){var s=document.createElement("form"),r=document.createElement("textarea"),t=this.iframeId="socketio_iframe_"+this.index,e;s.className="socketio";s.style.position="absolute";s.style.top="0px";s.style.left="0px";s.style.display="none";s.target=t;s.method="POST";s.setAttribute("accept-charset","utf-8");r.name="d";s.appendChild(r);document.body.appendChild(s);this.form=s;this.area=r}this.form.action=this.prepareUrl()+b;function q(){p();a.socket.setBuffer(false)}function p(){if(a.iframe){a.form.removeChild(a.iframe)}try{e=document.createElement('<iframe name="'+a.iframeId+'">')}catch(k){e=document.createElement("iframe");e.name=a.iframeId}e.id=a.iframeId;a.form.appendChild(e);a.iframe=e}p();this.area.value=h.JSON.stringify(d);try{this.form.submit()}catch(c){}if(this.iframe.attachEvent){e.onreadystatechange=function(){if(a.iframe.readyState=="complete"){q()}}}else{this.iframe.onload=q}this.socket.setBuffer(true)};j.prototype.get=function(){var c=this,d=document.createElement("script"),a=h.util.query(this.socket.options.query,"t="+(+new Date)+"&i="+this.index);if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}d.async=true;d.src=this.prepareUrl()+a;d.onerror=function(){c.onClose()};var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(d,b);this.script=d;if(g){setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e);document.body.removeChild(e)},100)}};j.prototype._=function(a){this.onData(a);if(this.open){this.get()}return this};j.prototype.ready=function(c,a){var b=this;if(!g){return a.call(this)}h.util.load(function(){a.call(b)})};j.check=function(){return"document" in i};j.xdomainCheck=function(){return true};h.transports.push("jsonp-polling")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);